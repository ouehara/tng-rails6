$(document).on("turbolinks:load",function(){$("body").on("click","a",function(t){var e=$(this),n=window.location.href.replace(window.location.origin,"").split("#")[0];if("#"===$(this).attr("href").charAt(0)){t.preventDefault();var a=e.is('[href*="#"]')&&$(this.hash).length?$(this.hash).offset().top-78:0;if(!$(this.hash).length)return;$target=$(this.hash),$("html,body").animate({scrollTop:a},{duration:700,step:function(t,e){var n=$target.offset().top-78;e.end!==n&&(e.end=n)}}),history.pushState&&history.pushState(null,null,n+e.attr("href"))}})}),$(".go-to-top").click(function(t){return t.preventDefault(),$("html, body").animate({scrollTop:0},300),!1}),$(".more-mobile").click(function(){$(".area-list-flex").toggleClass("open"),$(".area-list-flex").hasClass("open")?$(".more-mobile").text("<%= t('sidebar.hide')%>"):$(".more-mobile").text("<%= t('sidebar.more')%>")});var app=window.app={};app.dropDowns=function(){$(".container").on("click",".dropdown-menu li a",function(t){"#"==$(this).attr("href")&&t.preventDefault();var e=$(this).html();$(this).parents(".dropdown-menu").find("li").removeClass("active"),$(this).parent("li").addClass("active"),$(this).parents(".dropdown").find("input").val(e),$(this).parents(".dropdown").find(".btn").html(e+' <span class="caret"></span>')})},app.SavorLocation=function(){this._input=$("#location"),this._initAutocomplete()},app.SavorCuisine=function(){this._input=$("#cuisine"),this._initAutocomplete()},app.SavorCuisine.prototype={_initAutocomplete:function(){this._input.autocomplete({source:$.proxy(this._source,this),appendTo:"#cuisine-search-results",select:$.proxy(this._select,this)}).autocomplete("instance")._renderItem=function(t,e){return $("<li aria-label='"+e.label+"'>").append("<div>"+e.label+"</div > ").appendTo(t)}},_source:function(t,e){$.getJSON("en"!=I18n.current?"/"+I18n.current:"/restaurant/autocomplete/cuisine/?term="+t.term,function(t){e($.map(t,function(t){return{label:null!=t.large_category?t.large_category:t.small_category,id:"undefined"!=typeof t.large_category_code?t.large_category_code:t.small_category_code,cat:null!=t.large_category?"large":"small"}}))})},_select:function(t,e){this._input.val(e.item.label);var n=$("#cuisine_id_");return n.attr("name","large"==e.item.cat?"cuisine_id":"sub_cuisine_id"),n.val(e.item.id),!1}},app.SavorLocation.prototype={_initAutocomplete:function(){this._input.on("keydown",function(){$("#loc_type_").val("")}),this._input.autocomplete({source:$.proxy(this._source,this),appendTo:"#location-search-results",select:$.proxy(this._select,this),change:$.proxy(this._change,this)}).autocomplete("instance")._renderMenu=function(a,t){var o=this,i="";$.each(t,function(t,e){var n;e.category!=i&&(a.append("<li class='ui-autocomplete-category bold' aria-label='ff'>"+e.category+"</li>"),i=e.category),n=o._renderItemData(a,e),e.category&&n.attr("aria-label",e.category+" : "+e.label)})}},_source:function(t,e){$.getJSON("en"!=I18n.current?"/"+I18n.current:"/restaurant/autocomplete/landmark/?term="+t.term,function(t){e($.map(t,function(t,e){if(0!=t.length)return $.map(t,function(t){return label="","prefectures"==e&&(label=t.pref),"town"==e&&(label=t.township),"subTown"==e&&(label=t.sub_township),"landmark"==e&&(label=t.spot_name),{label:label,category:e}})}))})},_select:function(t,e){return this._input.val(e.item.label),$("#loc_type_").val(e.item.category),!1}},$(document).ready(function(){$(".open-search").click(function(){$(".rest-closed").removeClass("rest-closed")})}),function(){}.call(this);