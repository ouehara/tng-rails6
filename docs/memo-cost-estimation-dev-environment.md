# 開発環境インフラコスト試算

**作成日**: 2025年9月29日
**対象環境**: dev環境（東京リージョン）

## 概要

Terraformで構築された開発環境のAWSインフラコストの試算結果である

## 現在の構成

### 主要AWSリソース

| カテゴリ | サービス | 仕様 | 1日あたりコスト |
|---------|----------|------|----------------|
| **コンピュート** | ECS Fargate | 1 vCPU, 2GB RAM, 24時間稼働 | $0.73 |
| **データベース** | RDS PostgreSQL | db.t3.micro, 40GB gp2, 暗号化 | $1.07 |
| **キャッシュ** | ElastiCache Memcached | cache.t3.micro (0.5GB) | $0.56 |
| **ロードバランサー** | Application Load Balancer | 内部ALB | $0.73 |
| **CDN** | CloudFront | 1GB配信/日, 10k requests/日 | $0.15 |
| **ストレージ** | S3 | 10GB保存, 1k requests/日 | $0.24 |
| **セキュリティ** | WAF Web ACL | 基本料金 | $0.60 |
| **ネットワーク** | VPCエンドポイント | 6個のエンドポイント | $1.44 |

### コスト合計

- **1日あたり**: $5.52 (約¥800)
- **月額**: $166 (約¥24,000)
- **年額**: $2,014 (約¥292,000)

## 実際のリソース使用状況

### パフォーマンスメトリクス（直近データ）

- **CPU使用率**: 0.1% - 0.8% （非常に低い）
- **メモリ使用率**: 20% - 31% （約600MB/2GB使用）
- **タスク数**: 1個実行中

## コスト最適化案

### 提案1: リソースサイズ最適化

現在のメトリクスに基づく最適化:

| リソース | 現在 | 最適化後 | 削減額/日 |
|---------|------|----------|----------|
| ECS CPU | 1 vCPU | 0.5 vCPU | -$0.36 |
| ECS メモリ | 2GB | 1GB | -$0.18 |
| RDS | t3.micro | t3.nano | -$0.54 |

**最適化後コスト**: $4.44/日 (約¥644/日)
**月額削減**: $32 (約¥4,640)

### 提案2: 開発時間外停止

平日夜間・土日の自動停止による追加削減:

- **ECS**: 12時間/日停止 → 追加-$0.36/日
- **RDS**: スナップショットから復旧可能
- **ElastiCache**: 開発時のみ起動

**最大削減可能額**: $2.0/日追加削減

## 注意事項

1. **本番環境とのギャップ**: 開発環境は本番より小さく設定
2. **データ転送費**: 実際の使用量により変動
3. **IP制限**: WAFで開発者IP制限を実装
4. **リージョン**: ap-northeast-1（東京）での価格

---

**備考**: この試算はTerraformファイルの構成と現在のメトリクスに基づいています。実際の請求額は使用パターンにより変動する可能性があります。